-- Set your password here
local correctPassword = "yourpassword"

-- Disable termination
os.pullEvent = os.pullEventRaw

-- Clear screen
term.clear()
term.setCursorPos(1,1)

-- Get screen size
local w, h = term.getSize()

-- Centered "Enter Password" text
local enterText = "Enter Password:"
term.setCursorPos(math.floor((w - #enterText) / 2), math.floor(h / 2) - 2)
print(enterText)

-- Draw a simple input box
local boxWidth = 20
local boxStartX = math.floor((w - boxWidth) / 2)
local boxY = math.floor(h / 2)

-- Draw top of box
term.setCursorPos(boxStartX, boxY)
write("+" .. string.rep("-", boxWidth - 2) .. "+")

-- Draw middle (where typing will happen)
term.setCursorPos(boxStartX, boxY + 1)
write("|" .. string.rep(" ", boxWidth - 2) .. "|")

-- Draw bottom of box
term.setCursorPos(boxStartX, boxY + 2)
write("+" .. string.rep("-", boxWidth - 2) .. "+")

-- Move cursor inside the box for typing
term.setCursorPos(boxStartX + 1, boxY + 1)

-- Custom hidden password input
local input = ""
while true do
    local event, param = os.pullEvent()
    if event == "char" then
        if #input < (boxWidth - 2) then
            input = input .. param
            term.write("X")
        end
    elseif event == "key" then
        if param == keys.enter then
            break
        elseif param == keys.backspace then
            if #input > 0 then
                -- Remove last character
                input = string.sub(input, 1, #input - 1)
                -- Move cursor back, erase character, move back again
                local x, y = term.getCursorPos()
                term.setCursorPos(x-1, y)
                term.write(" ")
                term.setCursorPos(x-1, y)
            end
        end
    end
end

-- Clear screen again
term.clear()
term.setCursorPos(1,1)

-- Centered "Access Granted" or "Access Denied"
local message = ""

if input == correctPassword then
    message = "Access Granted"
else
    message = "Access Denied"
end

-- Center the message
term.setCursorPos(math.floor((w - #message) / 2), math.floor(h / 2))
print(message)

-- If granted, move to main screen
if input == correctPassword then
    sleep(2)
    term.clear()
    term.setCursorPos(1,1)
    print("Main Screen:")
    print("[File: Organizations]")
end
